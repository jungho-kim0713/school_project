<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™êµ ìŠ¤ë§ˆíŠ¸ ì•„ì¹´ì´ë¸Œ</title>
    <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- ì•„ì´ì½˜ (Bootstrap Icons) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        /* ë„¤ë¹„ê²Œì´ì…˜ íƒ­ ìŠ¤íƒ€ì¼ */
        .nav-pills .nav-link {
            color: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            padding: 8px 20px;
        }
        .nav-pills .nav-link.active {
            background-color: white;
            color: #0d6efd; /* Bootstrap Primary Color */
            font-weight: bold;
        }
        .nav-pills .nav-link:hover {
            color: white;
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        /* ì¹´ë“œ ì´ë¯¸ì§€ ë†’ì´ ê³ ì • */
        .card-img-top {
            height: 250px;
            object-fit: cover;
        }

        /* ë§í¬ ì¹´ë“œ ìŠ¤íƒ€ì¼ (4:3 ë¹„ìœ¨) */
        .link-card-img-wrapper {
            position: relative;
            width: 100%;
            padding-top: 75%; /* 4:3 ë¹„ìœ¨ */
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .link-card-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
        }
        
        /* í˜¸ë²„ íš¨ê³¼ */
        .hover-shadow:hover {
            transform: translateY(-5px);
            box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;
            transition: all 0.3s;
        }
    </style>
</head>
<body class="bg-light">

    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (íŒŒë€ìƒ‰ ë°°ê²½ + íƒ­ ë©”ë‰´) -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm py-3 sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold fs-4 me-5" href="#">ğŸ« School Archive</a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- ë©”ë‰´ ì•„ì´í…œ (íƒ­ ë²„íŠ¼) -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="nav nav-pills ms-auto" id="pills-tab" role="tablist">
                    <li class="nav-item me-2" role="presentation">
                        <button class="nav-link active" id="tab-media" data-bs-toggle="pill" data-bs-target="#content-media" type="button">
                            ğŸ“¸ ê°¤ëŸ¬ë¦¬
                        </button>
                    </li>
                    <li class="nav-item me-2" role="presentation">
                        <button class="nav-link" id="tab-text" data-bs-toggle="pill" data-bs-target="#content-text" type="button">
                            ğŸ“ ê²Œì‹œíŒ
                        </button>
                    </li>
                    <li class="nav-item me-2" role="presentation">
                        <button class="nav-link" id="tab-code" data-bs-toggle="pill" data-bs-target="#content-code" type="button">
                            ğŸ’» ê°œë°œ/ìë£Œ
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tab-link" data-bs-toggle="pill" data-bs-target="#content-link" type="button">
                            ğŸ”— ê³µì‹ ë§í¬
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- ë©”ì¸ íƒ€ì´í‹€ -->
    <div class="container py-5 text-center">
        <h2 class="fw-bold display-5">ìš°ë¦¬ í•™êµì˜ ëª¨ë“  ìˆœê°„</h2>
        <p class="text-muted lead">AIì™€ í•¨ê»˜ ê¸°ë¡í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ì•„ì¹´ì´ë¸Œ</p>
    </div>

    <!-- ì½˜í…ì¸  ì˜ì—­ (íƒ­ ë‚´ìš©) -->
    <div class="container pb-5">
        <div class="tab-content" id="pills-tabContent">
            
            <!-- 1. ë¯¸ë””ì–´ ê°¤ëŸ¬ë¦¬ (ì´ë¯¸ì§€/ì˜ìƒ) -->
            <div class="tab-pane fade show active" id="content-media" role="tabpanel">
                <div class="row row-cols-1 row-cols-md-3 g-4">
                    {% for post in media_posts %}
                    <div class="col">
                        <div class="card h-100 shadow-sm border-0 hover-shadow">
                            {% if post.file %}
                            <img src="{{ post.file.url }}" class="card-img-top" alt="{{ post.title }}">
                            {% else %}
                            <div class="card-img-top d-flex align-items-center justify-content-center bg-secondary text-white">
                                <span>ì´ë¯¸ì§€ ì—†ìŒ</span>
                            </div>
                            {% endif %}
                            
                            <div class="card-body">
                                <h5 class="card-title fw-bold">{{ post.title }}</h5>
                                <p class="card-text text-muted small">{{ post.description|truncatechars:50 }}</p>
                                
                                <!-- AI ë¶„ì„ ê²°ê³¼ í‘œì‹œ -->
                                {% if post.ai_caption %}
                                <div class="alert alert-info py-2 px-3 mt-3 mb-0 small">
                                    <i class="bi bi-robot me-1"></i> {{ post.ai_caption }}
                                </div>
                                {% endif %}
                            </div>
                            <div class="card-footer bg-white border-top-0 d-flex justify-content-between align-items-center">
                                <small class="text-muted">{{ post.created_at|date:"Y-m-d" }}</small>
                                <div>
                                    <i class="bi bi-heart-fill text-danger"></i> {{ post.like_count }}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-5 text-muted">
                        <div class="fs-1 mb-3">ğŸ–¼ï¸</div>
                        <p>ë“±ë¡ëœ ì‚¬ì§„ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- 2. ê²Œì‹œíŒ (ê¸€) -->
            <div class="tab-pane fade" id="content-text" role="tabpanel">
                <div class="row row-cols-1 row-cols-md-2 g-4">
                    {% for post in text_posts %}
                    <div class="col">
                        <div class="card h-100 border-2 hover-shadow">
                            <div class="card-body">
                                <div class="d-flex justify-content-between mb-2 text-secondary small">
                                    <span>{{ post.created_at|date:"Y.m.d" }}</span>
                                    <span>{{ post.author_name }}</span>
                                </div>
                                <h4 class="card-title fw-bold">{{ post.title }}</h4>
                                <p class="card-text mt-3">{{ post.content|truncatechars:100 }}</p>
                            </div>
                            <div class="card-footer bg-white border-0 text-end">
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#textModal{{ post.id }}">ë” ë³´ê¸°</button>
                            </div>
                        </div>

                        <!-- ê¸€ ìƒì„¸ ëª¨ë‹¬ -->
                        <div class="modal fade" id="textModal{{ post.id }}" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title fw-bold">{{ post.title }}</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body py-4" style="white-space: pre-line;">{{ post.content }}</div>
                                    <div class="modal-footer">
                                        <small class="text-muted me-auto">ì‘ì„±ì: {{ post.author_name }}</small>
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-5 text-muted">
                        <div class="fs-1 mb-3">ğŸ“</div>
                        <p>ë“±ë¡ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- 3. ê°œë°œ/ìë£Œ (ì½”ë“œ) -->
            <div class="tab-pane fade" id="content-code" role="tabpanel">
                <div class="row row-cols-1 row-cols-md-3 g-4">
                    {% for link in code_links %}
                    <div class="col">
                        <div class="card h-100 border-dark hover-shadow">
                            <div class="card-header bg-dark text-white d-flex justify-content-between">
                                <span class="badge bg-secondary">{{ link.get_category_display }}</span>
                                <small>{{ link.created_at|date:"m.d" }}</small>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title fw-bold">
                                    <i class="bi bi-code-slash me-2"></i>{{ link.title }}
                                </h5>
                                <p class="card-text text-muted small">{{ link.description }}</p>
                            </div>
                            <div class="card-footer bg-white border-0">
                                <a href="{{ link.url }}" target="_blank" class="btn btn-dark w-100">
                                    ë°”ë¡œê°€ê¸° <i class="bi bi-box-arrow-up-right ms-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-5 text-muted">
                        <div class="fs-1 mb-3">ğŸ’»</div>
                        <p>ê³µìœ ëœ ì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- 4. ê³µì‹ ë§í¬ -->
            <div class="tab-pane fade" id="content-link" role="tabpanel">
                <div class="row row-cols-2 row-cols-md-4 g-4">
                    {% for link in official_links %}
                    <div class="col">
                        <a href="{{ link.url }}" target="_blank" class="text-decoration-none text-dark">
                            <div class="card h-100 shadow-sm border-0 hover-shadow text-center">
                                <div class="link-card-img-wrapper rounded-top">
                                    <div class="link-card-icon">
                                        {% if link.icon_type == 'YOUTUBE' %}<i class="bi bi-youtube text-danger"></i>
                                        {% elif link.icon_type == 'INSTAGRAM' %}<i class="bi bi-instagram text-danger"></i>
                                        {% elif link.icon_type == 'BLOG' %}<i class="bi bi-pencil-square text-success"></i>
                                        {% else %}<i class="bi bi-globe text-primary"></i>{% endif %}
                                    </div>
                                </div>
                                <div class="card-body">
                                    <h6 class="card-title fw-bold mb-0">{{ link.title }}</h6>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-5 text-muted">
                        <div class="fs-1 mb-3">ğŸ”—</div>
                        <p>ë“±ë¡ëœ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </div>

    <!-- í•˜ë‹¨ í‘¸í„° -->
    <footer class="py-4 mt-auto bg-white border-top">
        <div class="container text-center text-muted">
            &copy; 2024 School Archive Project. All rights reserved.
        </div>
    </footer>

    <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© JS (íƒ­ ê¸°ëŠ¥ í•„ìˆ˜) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>